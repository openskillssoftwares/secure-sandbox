server {
    listen 80;
    server_name _;
    root /usr/share/nginx/html;
    index index.html;
    
    # Vulnerable: Directory listing enabled
    autoindex on;
    
    # Vulnerable: CORS misconfiguration
    add_header Access-Control-Allow-Origin *;
    add_header Access-Control-Allow-Credentials true;
    add_header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS";
    
    # Vulnerable: Information disclosure
    add_header X-Powered-By "Nginx/1.21.0 (Ubuntu)";
    add_header Server "Production-Server-001";
    
    # Vulnerable: Exposes sensitive files
    location ~ /\. {
        # Should deny but doesn't
        allow all;
    }
    
    location / {
        try_files $uri $uri/ =404;
    }
    
    # Vulnerable: Admin panel without authentication
    location /admin {
        try_files $uri $uri/ =404;
    }
    
    # Vulnerable: Config files accessible
    location /config {
        allow all;
    }
    
    # Vulnerable: No rate limiting
    location /api {
        proxy_pass http://backend;
    }
}
